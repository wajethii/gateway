<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>mmNet - Choose Your Package</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo:ital,wght@0,100..900;1,100..900&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
        }
      
    </style>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
        async function payNow(amount, cardElement) {
            const email = prompt("Enter your email address:");
            if (!email) return alert("Payment canceled.");

            const handler = PaystackPop.setup({
                key: 'pk_live_ddf8b229efa8b8d52e6bc93e8deb17bb1984015b', // Replace with your Paystack public key
                email: email,
                amount: amount * 100, // Paystack works with kobo (100 kobo = 1 KES)
                currency: 'KES', // Kenyan Shillings
                callback: function(response) {
                    alert("Payment successful. Reference: " + response.reference);
                    // Send the reference to your backend for verification
                    verifyPayment(response.reference);
                },
                onClose: function() {
                    alert("Payment process closed.");
                }
            });

            handler.openIframe();
        }

        function verifyPayment(reference) {
            fetch('/verify-payment', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ reference })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    alert("Payment verified!");
                } else {
                    alert("Payment verification failed.");
                }
            })
            .catch(err => alert("Error verifying payment: " + err));
        }
    </script>
</head>

<body class="bg-black">
    <div class="container text-center py-5">
        <h1 class="py-2 text-warning">Welcome to mmNet</h1>
        <p class="text-warning">Choose a package to get started:</p>
        <div class="row g-4 justify-content-center">
            <div class="col-md-4">
                <div class="card shadow-sm border-0 border-start border-primary" onclick="payNow(30, this)">
                    <div class="card-body py-5">
                        <h4 class="mb-2">6Hrs @ 30KES</h1>
                        <p class="card-text fs-5 fw-light">Fast Speeds & no buffers</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm border-0 border-start border-light bg-warning bg-gradient" onclick="payNow(50, this)">
                    <div class="card-body py-5">
                        <h4 class="mb-2">12Hrs @ 50KES</h1>
                        <p class="card-text fs-5 fw-light">Double the time, same fast speeds</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm border-0 border-start border-info bg-info bg-gradient" onclick="payNow(80, this)">
                    <div class="card-body py-5">
                        <h4 class="mb-2">24Hrs @ 80KES</h1>
                        <p class="card-text fs-5 fw-light">Unlimited access for the whole day</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
